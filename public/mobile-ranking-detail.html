<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¦œå•è¯¦æƒ… - è‚¡ç¥¨æ ‡ç­¾æ¢ç´¢å™¨</title>
    <link rel="stylesheet" href="styles/mobile-ranking-detail.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- çŠ¶æ€æ å ä½ -->
    <div class="status-bar"></div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container">
        <!-- å›ºå®šé¡µé¦–å¯¼èˆªæ¡ -->
        <div class="fixed-header">
            <div class="header-card">
                <div class="header-line"></div>
                <div class="header-content">
                    <button class="back-btn" onclick="history.back()">
                        <span class="back-icon">â†</span>
                    </button>
                    <h1 class="header-title" id="page-title">æ¦œå•è¯¦æƒ…</h1>
                    <div class="header-actions">
                        <button class="refresh-btn" onclick="loadRankingData()">
                            <span class="refresh-icon">â†»</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- é¡µé¢å†…å®¹ -->
        <div class="page-content">
            <!-- æ¦œå•ç»Ÿè®¡å¡ç‰‡ -->
            <div class="stats-card">
                <div class="stats-line"></div>
                <div class="stats-content">
                    <div class="stat-item">
                        <span class="stat-icon" id="stat-icon">ğŸ“ˆ</span>
                        <div class="stat-info">
                            <span class="stat-number" id="stat-number">--</span>
                            <span class="stat-label" id="stat-label">è‚¡ç¥¨æ•°é‡</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">ğŸ“Š</span>
                        <div class="stat-info">
                            <span class="stat-number" id="avg-change">--</span>
                            <span class="stat-label">å¹³å‡æ¶¨è·Œå¹…</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">ğŸ’°</span>
                        <div class="stat-info">
                            <span class="stat-number" id="total-value">--</span>
                            <span class="stat-label">æ€»å¸‚å€¼</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ’åºç­›é€‰å¡ç‰‡ -->
            <div class="filter-card">
                <div class="filter-line"></div>
                <div class="filter-content">
                    <div class="filter-group">
                        <label class="filter-label">æ’åºæ–¹å¼</label>
                        <select class="filter-select" id="sort-select">
                            <option value="change_desc">æ¶¨è·Œå¹… â†“</option>
                            <option value="change_asc">æ¶¨è·Œå¹… â†‘</option>
                            <option value="market_cap_desc">å¸‚å€¼ â†“</option>
                            <option value="market_cap_asc">å¸‚å€¼ â†‘</option>
                            <option value="volume_desc">æˆäº¤é‡ â†“</option>
                            <option value="volume_asc">æˆäº¤é‡ â†‘</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">å¸‚åœº</label>
                        <select class="filter-select" id="market-select">
                            <option value="all">å…¨éƒ¨å¸‚åœº</option>
                            <option value="sp500">æ ‡æ™®500</option>
                            <option value="chinese">ä¸­æ¦‚è‚¡</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- è‚¡ç¥¨åˆ—è¡¨å¡ç‰‡ -->
            <div class="stock-list-card">
                <div class="stock-list-line"></div>
                <div class="stock-list-content">
                    <!-- åŠ è½½çŠ¶æ€ -->
                    <div id="loading-state" class="loading-container">
                        <div class="loading-spinner"></div>
                        <p>åŠ è½½ä¸­...</p>
                    </div>

                    <!-- é”™è¯¯çŠ¶æ€ -->
                    <div id="error-state" class="error-container hidden">
                        <div class="error-icon">âš ï¸</div>
                        <p class="error-message">åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•</p>
                        <button class="retry-btn" onclick="loadRankingData()">é‡æ–°åŠ è½½</button>
                    </div>

                    <!-- è‚¡ç¥¨åˆ—è¡¨ -->
                    <div id="stock-list" class="stock-list hidden"></div>

                    <!-- ç©ºçŠ¶æ€ -->
                    <div id="empty-state" class="empty-container hidden">
                        <div class="empty-icon">ğŸ“Š</div>
                        <p class="empty-message">æš‚æ— æ•°æ®</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast é€šçŸ¥ -->
    <div id="toast" class="toast"></div>

    <script src="scripts/mobile-ranking-detail.js"></script>
    <script>
        // ç”Ÿæˆæ¨¡æ‹Ÿè‚¡ç¥¨æ•°æ®ï¼ˆä¿ç•™ç”¨äºå…¼å®¹æ€§ï¼‰
        function generateMockStocks(type, market, count) {
            const sp500Stocks = {
                symbols: ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'TSLA', 'META', 'NVDA', 'NFLX', 'AMD', 'CRM', 'ORCL', 'ADBE'],
                names: ['è‹¹æœ', 'å¾®è½¯', 'è°·æ­Œ', 'äºšé©¬é€Š', 'ç‰¹æ–¯æ‹‰', 'Meta', 'è‹±ä¼Ÿè¾¾', 'å¥ˆé£', 'AMD', 'Salesforce', 'ç”²éª¨æ–‡', 'Adobe']
            };
            
            const chineseStocks = {
                symbols: ['BABA', 'JD', 'PDD', 'BIDU', 'NIO', 'XPEV', 'LI', 'BILI', 'TME', 'NTES', 'WB', 'DIDI'],
                names: ['é˜¿é‡Œå·´å·´', 'äº¬ä¸œ', 'æ‹¼å¤šå¤š', 'ç™¾åº¦', 'è”šæ¥', 'å°é¹', 'ç†æƒ³', 'å“”å“©å“”å“©', 'è…¾è®¯éŸ³ä¹', 'ç½‘æ˜“', 'å¾®åš', 'æ»´æ»´']
            };
            
            const stockData = market === 'chinese_stocks' ? chineseStocks : sp500Stocks;
            const { symbols, names } = stockData;
            
            const stocks = [];
            for (let i = 0; i < count; i++) {
                const symbolIndex = i % symbols.length;
                const baseChange = type === 'gainers' ? Math.random() * 15 : 
                                 type === 'losers' ? -Math.random() * 15 : 
                                 (Math.random() - 0.5) * 20;
                
                stocks.push({
                    symbol: symbols[symbolIndex] + (i > symbols.length - 1 ? i : ''),
                    name: names[symbolIndex] + (i > names.length - 1 ? i : ''),
                    price: 100 + Math.random() * 400,
                    change: baseChange,
                    marketCap: (Math.random() * 2000 + 100) * 1e9
                });
            }
            
            // æ ¹æ®ç±»å‹æ’åº
            if (type === 'gainers') {
                stocks.sort((a, b) => b.change - a.change);
            } else if (type === 'losers') {
                stocks.sort((a, b) => a.change - b.change);
            } else if (type === 'marketcap') {
                stocks.sort((a, b) => b.marketCap - a.marketCap);
            }
            
            return stocks;
        }

        // æŸ¥çœ‹è‚¡ç¥¨è¯¦æƒ…
        function viewStockDetail(symbol) {
            showToast(`æŸ¥çœ‹ ${symbol} è¯¦æƒ…`, 'info');
            // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°è‚¡ç¥¨è¯¦æƒ…é¡µé¢
        }

        // æ’åºå’Œç­›é€‰äº‹ä»¶ç›‘å¬
        document.addEventListener('DOMContentLoaded', function() {
            // æ’åºé€‰æ‹©å˜åŒ–
            document.getElementById('sort-select').addEventListener('change', function() {
                showToast('é‡æ–°æ’åºä¸­...', 'info');
                setTimeout(() => loadRankingData(), 500);
            });

            // å¸‚åœºç­›é€‰å˜åŒ–
            document.getElementById('market-select').addEventListener('change', function() {
                showToast('ç­›é€‰ä¸­...', 'info');
                setTimeout(() => loadRankingData(), 500);
            });

            // é¡µé¢åˆå§‹åŒ–
            loadRankingData();
        });
    </script>
</body>
</html>