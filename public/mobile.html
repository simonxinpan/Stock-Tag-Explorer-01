<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Stock Explorer Mobile - 移动版美股数据应用</title>
    <link rel="stylesheet" href="./styles/mobile.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="scripts/mobile-app.js" defer></script>
    <script>
        // 导航到标签详情页面
        function navigateToTagDetail(tagId) {
            window.location.href = `mobile-tag-detail.html?tagId=${tagId}`;
        }

        // 导航到标签（保留原有功能）
        function navigateToTag(tagId) {
            console.log(`查看 ${tagId} 标签`);
            // 这里可以跳转到标签详情页面
        }

        // 榜单"更多"按钮功能
         document.addEventListener('DOMContentLoaded', function() {
             const moreButtons = document.querySelectorAll('.more-btn');
             moreButtons.forEach(btn => {
                 btn.addEventListener('click', function() {
                     const listType = this.getAttribute('data-list');
                     window.location.href = `mobile-ranking-detail.html?type=${listType}`;
                 });
             });

             // 市场切换标签功能（二级页面导航）
             const marketTabs = document.querySelectorAll('.market-tab-btn');
             marketTabs.forEach(tab => {
                 tab.addEventListener('click', function() {
                     const market = this.getAttribute('data-market');
                     
                     // 移除所有活跃状态
                     marketTabs.forEach(t => t.classList.remove('active'));
                     // 添加当前活跃状态
                     this.classList.add('active');
                     
                     // 跳转到对应市场的二级页面
                     window.location.href = `mobile-market-detail.html?market=${market}`;
                 });
             });

             // 榜单导航按钮功能
             const rankingNavBtns = document.querySelectorAll('.ranking-nav-btn');
             rankingNavBtns.forEach(btn => {
                 btn.addEventListener('click', function() {
                     const ranking = this.getAttribute('data-ranking');
                     const currentMarket = document.querySelector('.market-tab-btn.active')?.getAttribute('data-market') || 'sp500';
                     
                     // 跳转到具体榜单的三级页面
                     window.location.href = `mobile-ranking-detail.html?type=${ranking}&market=${currentMarket}`;
                 });
             });
         });
    </script>
</head>
<body>
    <!-- 移动端应用容器 -->
    <div id="mobile-app" class="mobile-app">
        <!-- 顶部状态栏 -->
        <header class="mobile-header">
            <div class="header-content">
                <h1 class="app-title">📊 Stock Explorer</h1>
                <div class="market-status">
                    <span class="status-dot"></span>
                    <span class="status-text">实时更新</span>
                </div>
            </div>
        </header>

        <!-- 主内容区域 -->
        <main class="mobile-main">
            <!-- 榜单页面 -->
        <div id="trending-mobile" class="page-content active">
                <!-- 固定页首导航条 -->
                <div class="fixed-top-nav">
                    <div class="page-header-card">
                        <div class="header-accent-line"></div>
                        <h2>趋势风云榜</h2>
                        <p>实时股票排行榜</p>
                    </div>
                    
                    <!-- 榜单导航条 -->
                    <div class="ranking-nav-card">
                        <div class="nav-accent-line"></div>
                        <div class="ranking-nav-container">
                            <!-- 市场切换标签（移到导航条左侧） -->
                            <div class="market-tabs-nav">
                                <button class="market-tab-btn active" data-market="sp500">
                                    标普500 <span id="sp500-count-mobile" class="market-count">502</span>
                                </button>
                                <button class="market-tab-btn" data-market="chinese_stocks">
                                    中概股 <span id="chinese-count-mobile" class="market-count">55</span>
                                </button>
                            </div>
                            
                            <!-- 榜单导航 - 14个榜单可滑动 -->
                            <div class="ranking-nav-scroll">
                                <div class="ranking-nav">
                                    <button class="ranking-nav-btn active" data-ranking="top_gainers">
                                        🚀 涨幅榜
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="top_market_cap">
                                        💰 市值榜
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="new_highs">
                                        ⬆️ 创新高
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="top_turnover">
                                        💰 成交额
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="top_volatility">
                                        📊 振幅榜
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="top_gap_up">
                                        🌅 高开缺口
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="top_losers">
                                        📉 跌幅榜
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="new_lows">
                                        ⬇️ 创新低
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="institutional_focus">
                                        🏛️ 机构关注
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="retail_hot">
                                        👥 散户热门
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="smart_money">
                                        🏛️ 主力动向
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="high_liquidity">
                                        💧 高流动性
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="unusual_activity">
                                        ⚡ 异动榜
                                    </button>
                                    <button class="ranking-nav-btn" data-ranking="momentum_stocks">
                                        🚀 动量榜
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 市场概览（田字格布局） -->
                <div class="market-overview-grid">
                    <div class="overview-grid-item">
                        <div class="overview-icon">📊</div>
                        <div class="overview-content">
                            <span class="overview-label">总股票数</span>
                            <span id="total-stocks" class="overview-value">502</span>
                        </div>
                    </div>
                    <div class="overview-grid-item">
                        <div class="overview-icon positive">📈</div>
                        <div class="overview-content">
                            <span class="overview-label">上涨</span>
                            <span id="rising-stocks" class="overview-value positive">326</span>
                        </div>
                    </div>
                    <div class="overview-grid-item">
                        <div class="overview-icon negative">📉</div>
                        <div class="overview-content">
                            <span class="overview-label">下跌</span>
                            <span id="falling-stocks" class="overview-value negative">163</span>
                        </div>
                    </div>
                    <div class="overview-grid-item">
                        <div class="overview-icon">💰</div>
                        <div class="overview-content">
                            <span class="overview-label">总市值</span>
                            <span id="total-market-cap" class="overview-value">$60.54万亿</span>
                        </div>
                    </div>
                </div>
                
                <!-- 加载状态 -->
                <div id="loading-trending" class="loading-state hidden">
                    <div class="loading-spinner"></div>
                    <p>正在加载榜单数据...</p>
                </div>
                
                <!-- 错误状态 -->
                <div id="error-trending" class="error-state hidden">
                    <p>加载失败，请下拉刷新重试</p>
                </div>
                
                <!-- 榜单内容 - 14个完整榜单 -->
                <div id="trending-lists" class="trending-lists">
                    <!-- 涨幅榜 -->
                    <div class="list-section" data-ranking="top_gainers">
                        <div class="list-header">
                            <h3>🚀 涨幅榜</h3>
                            <p class="list-description">按当日涨跌幅排序，反映市场热点和资金偏好</p>
                        </div>
                        <div id="top-gainers-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 市值榜 -->
                    <div class="list-section" data-ranking="top_market_cap" style="display: none;">
                        <div class="list-header">
                            <h3>💰 市值榜</h3>
                            <p class="list-description">按市值排序，展示市场巨头和蓝筹股</p>
                        </div>
                        <div id="top-market-cap-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 创新高榜 -->
                    <div class="list-section" data-ranking="new_highs" style="display: none;">
                        <div class="list-header">
                            <h3>⬆️ 创年内新高</h3>
                            <p class="list-description">突破52周最高价的股票，显示强劲上升趋势</p>
                        </div>
                        <div id="new-highs-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 成交额榜 -->
                    <div class="list-section" data-ranking="top_turnover" style="display: none;">
                        <div class="list-header">
                            <h3>💰 成交额榜</h3>
                            <p class="list-description">按成交金额排序，反映市场关注度和流动性</p>
                        </div>
                        <div id="top-turnover-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 振幅榜 -->
                    <div class="list-section" data-ranking="top_volatility" style="display: none;">
                        <div class="list-header">
                            <h3>📊 振幅榜</h3>
                            <p class="list-description">按日内最高最低价差计算，反映股价波动程度</p>
                        </div>
                        <div id="top-volatility-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 高开缺口榜 -->
                    <div class="list-section" data-ranking="top_gap_up" style="display: none;">
                        <div class="list-header">
                            <h3>🌅 高开缺口榜</h3>
                            <p class="list-description">开盘价相对前收盘价的涨幅，反映隔夜消息面影响</p>
                        </div>
                        <div id="top-gap-up-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 跌幅榜 -->
                    <div class="list-section" data-ranking="top_losers" style="display: none;">
                        <div class="list-header">
                            <h3>📉 跌幅榜</h3>
                            <p class="list-description">按当日跌幅排序，识别市场风险和避险情绪</p>
                        </div>
                        <div id="top-losers-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 创新低榜 -->
                    <div class="list-section" data-ranking="new_lows" style="display: none;">
                        <div class="list-header">
                            <h3>⬇️ 创年内新低</h3>
                            <p class="list-description">跌破52周最低价的股票，显示弱势趋势</p>
                        </div>
                        <div id="new-lows-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 机构关注榜 -->
                    <div class="list-section" data-ranking="institutional_focus" style="display: none;">
                        <div class="list-header">
                            <h3>🏛️ 机构关注榜</h3>
                            <p class="list-description">基于大额交易和VWAP偏离度，追踪机构资金动向</p>
                        </div>
                        <div id="institutional-focus-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 散户热门榜 -->
                    <div class="list-section" data-ranking="retail_hot" style="display: none;">
                        <div class="list-header">
                            <h3>👥 散户热门榜</h3>
                            <p class="list-description">基于散户持股比例和交易活跃度，反映散户投资偏好</p>
                        </div>
                        <div id="retail-hot-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 主力动向榜 -->
                    <div class="list-section" data-ranking="smart_money" style="display: none;">
                        <div class="list-header">
                            <h3>🏛️ 主力动向榜</h3>
                            <p class="list-description">基于机构持股变化和大额交易，追踪主力资金动向</p>
                        </div>
                        <div id="smart-money-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 高流动性榜 -->
                    <div class="list-section" data-ranking="high_liquidity" style="display: none;">
                        <div class="list-header">
                            <h3>💧 高流动性榜</h3>
                            <p class="list-description">基于成交量和买卖价差，评估股票流动性</p>
                        </div>
                        <div id="high-liquidity-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 异动榜 -->
                    <div class="list-section" data-ranking="unusual_activity" style="display: none;">
                        <div class="list-header">
                            <h3>⚡ 异动榜</h3>
                            <p class="list-description">交易量异常放大的股票，可能有重大消息或资金异动</p>
                        </div>
                        <div id="unusual-activity-list" class="stock-list"></div>
                    </div>
                    
                    <!-- 动量榜 -->
                    <div class="list-section" data-ranking="momentum_stocks" style="display: none;">
                        <div class="list-header">
                            <h3>🚀 动量榜</h3>
                            <p class="list-description">综合价格、成交量、技术指标的动量评分</p>
                        </div>
                        <div id="momentum-stocks-list" class="stock-list"></div>
                    </div>
                </div>
            </div>


            <!-- 热力图页面 -->
            <div id="heatmap-mobile" class="page-content">
                <!-- 固定页首导航条 -->
                <div class="fixed-top-nav">
                    <div class="page-header-card">
                        <div class="header-accent-line"></div>
                        <h2>股票热力图</h2>
                        <p>可视化市场表现</p>
                    </div>
                    
                    <!-- 热力图控制栏卡片 -->
                    <div class="heatmap-controls-card">
                        <div class="nav-accent-line"></div>
                        <div class="heatmap-controls">
                            <select id="heatmap-market" class="market-selector">
                                <option value="US">美股</option>
                                <option value="CN">A股</option>
                                <option value="HK">港股</option>
                            </select>
                            <select id="heatmap-metric" class="metric-selector">
                                <option value="change">涨跌幅</option>
                                <option value="volume">成交量</option>
                                <option value="marketcap">市值</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- 热力图导航卡片 -->
                    <div class="heatmap-nav-card">
                        <div class="nav-accent-line"></div>
                        <div class="heatmap-nav">
                            <button class="heatmap-nav-btn active" data-view="industry">
                                行业仪表盘
                            </button>
                            <button class="heatmap-nav-btn" data-view="panoramic">
                                全景热力图
                            </button>
                        </div>
                    </div>
                    
                    <!-- 图例卡片 -->
                    <div class="legend-card">
                        <div class="legend-accent-line"></div>
                        <div class="heatmap-legend">
                            <div class="legend-item">
                                <span class="legend-color" style="background: var(--danger-color);"></span>
                                <span class="legend-text">跌幅较大</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: var(--neutral-color);"></span>
                                <span class="legend-text">平盘</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: var(--success-color);"></span>
                                <span class="legend-text">涨幅较大</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 热力图内容 -->
                <div class="heatmap-content">
                    <div id="heatmap-chart" class="heatmap-chart">
                        <iframe id="heatmap-frame" src="heatmap-center.html" style="width: 100%; height: 60vh; border: none; border-radius: 12px;"></iframe>
                    </div>
                    <div id="heatmap-loading" class="loading-state hidden">
                        <div class="loading-spinner"></div>
                        <p>热力图加载中...</p>
                    </div>
                    <div id="heatmap-error" class="error-state hidden">
                        <p>❌ 加载失败，请稍后重试</p>
                        <button onclick="mobileApp.loadHeatmapData()" class="retry-btn">重新加载</button>
                    </div>
                </div>
                
                <!-- 热力图说明卡片 -->
                <div class="heatmap-info-card">
                    <div class="info-accent-line"></div>
                    <div class="heatmap-info">
                        <div class="info-card">
                            <h4>热力图说明</h4>
                            <p>• 方块大小代表市值规模</p>
                            <p>• 颜色深浅代表涨跌幅度</p>
                            <p>• 点击方块查看个股详情</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 标签页面 -->
            <div id="tag-plaza-mobile" class="page-content">
                <!-- 固定顶部导航条 -->
                <div class="fixed-top-nav tag-fixed-nav">
                    <div class="page-header-card">
                        <div class="header-accent-line"></div>
                        <h2>标签广场</h2>
                        <p>发现投资主题</p>
                    </div>
                    
                    <!-- 分类导航卡片 -->
                    <div class="category-nav-card">
                        <div class="nav-accent-line"></div>
                        <div class="category-nav-container">
                            <div class="category-nav" id="category-nav">
                                <button class="category-btn active" data-category="all">全部</button>
                                <button class="category-btn" data-category="sector">行业板块</button>
                                <button class="category-btn" data-category="theme">主题概念</button>
                                <button class="category-btn" data-category="marketcap">市值规模</button>
                                <button class="category-btn" data-category="style">投资风格</button>
                                <button class="category-btn" data-category="region">地区分布</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 搜索框卡片 -->
                    <div class="search-card">
                        <div class="search-accent-line"></div>
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="tag-search" placeholder="搜索标签..." class="search-input">
                                <button class="search-btn">🔍</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 标签内容 -->
                <div id="tag-content-mobile" class="tag-content">
                    <!-- 标签按钮组 -->
                    <div id="tag-buttons-container" class="tag-buttons-container">
                        <div class="tag-item" onclick="navigateToTagDetail('tech')">
                            <span class="tag-name">科技股</span>
                            <span class="tag-count">150</span>
                        </div>
                        <div class="tag-item" onclick="navigateToTagDetail('finance')">
                            <span class="tag-name">金融股</span>
                            <span class="tag-count">89</span>
                        </div>
                        <div class="tag-item" onclick="navigateToTagDetail('healthcare')">
                            <span class="tag-name">医疗股</span>
                            <span class="tag-count">76</span>
                        </div>
                        <div class="tag-item" onclick="navigateToTagDetail('energy')">
                            <span class="tag-name">能源股</span>
                            <span class="tag-count">45</span>
                        </div>
                        <div class="tag-item" onclick="navigateToTagDetail('consumer')">
                            <span class="tag-name">消费股</span>
                            <span class="tag-count">123</span>
                        </div>
                        <div class="tag-item" onclick="navigateToTagDetail('marketcap_小盘股')">
                            <span class="tag-name">小盘股</span>
                            <span class="tag-count">67</span>
                        </div>
                    </div>
                    
                    <!-- 标签组 -->
                    <div id="tag-groups-mobile" class="tag-groups hidden">
                        <div class="tag-category">
                            <div id="market-performance-tags" class="tag-grid"></div>
                        </div>
                        
                        <div class="tag-category">
                            <div id="financial-performance-tags" class="tag-grid"></div>
                        </div>
                        
                        <div class="tag-category">
                            <div id="industry-tags" class="tag-grid"></div>
                        </div>
                        
                        <div class="tag-category">
                            <div id="special-tags" class="tag-grid"></div>
                        </div>
                    </div>
                </div>
                
                <!-- 加载状态 -->
                <div id="tags-loading" class="loading-state hidden">
                    <div class="loading-spinner"></div>
                    <p>加载标签中...</p>
                </div>
                
                <!-- 错误状态 -->
                <div id="tags-error" class="error-state hidden">
                    <p>❌ 加载失败，请稍后重试</p>
                    <button onclick="mobileApp.loadTagsData()" class="retry-btn">重新加载</button>
                </div>
            </div>

            <!-- 趋势榜单页面 -->
            <section id="trending-mobile-duplicate" class="page-content">
                <div class="page-header">
                    <h2 class="page-title">趋势榜单</h2>
                    <p class="page-subtitle">实时追踪市场热点</p>
                </div>
                
                <!-- 榜单导航条 -->
                <div class="ranking-nav-container">
                    <div class="ranking-nav">
                        <button class="ranking-nav-btn active" data-ranking="sp500">
                            标普500
                        </button>
                        <button class="ranking-nav-btn" data-ranking="chinese">
                            中概股
                        </button>
                        <button class="ranking-nav-btn" data-ranking="gainers">
                            涨跌幅
                        </button>
                        <button class="ranking-nav-btn" data-ranking="market-cap">
                            市值榜
                        </button>
                        <button class="ranking-nav-btn" data-ranking="new-highs">
                            创年内新高
                        </button>
                    </div>
                </div>
                
                <!-- 市场切换标签 -->
                <div class="market-tabs-mobile">
                    <button class="market-tab-btn active" data-market="sp500">
                        <span class="market-flag">🇺🇸</span>
                        <span class="market-name">标普500</span>
                        <span class="market-count" id="sp500-count-mobile">502</span>
                    </button>
                    <button class="market-tab-btn" data-market="chinese_stocks">
                        <span class="market-flag">🇨🇳</span>
                        <span class="market-name">中概股</span>
                        <span class="market-count" id="chinese-count-mobile">55</span>
                    </button>
                </div>
                
                <!-- 市场概览 -->
                <div class="market-overview">
                    <div class="overview-stats">
                        <div class="stat-item">
                            <span class="stat-icon">📊</span>
                            <div class="stat-content">
                                <span class="stat-number" id="total-stocks">502</span>
                                <span class="stat-label">总股票数</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">📈</span>
                            <div class="stat-content">
                                <span class="stat-number" id="rising-stocks">326</span>
                                <span class="stat-label">上涨股票</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">📉</span>
                            <div class="stat-content">
                                <span class="stat-number" id="falling-stocks">163</span>
                                <span class="stat-label">下跌股票</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">💎</span>
                            <div class="stat-content">
                                <span class="stat-number" id="total-market-cap">$60.54万亿</span>
                                <span class="stat-label">总市值</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 榜单内容 -->
                <div class="trending-content">
                    <!-- 加载状态 -->
                    <div id="loading-trending" class="loading-container">
                        <div class="loading-spinner"></div>
                        <p>加载中...</p>
                    </div>
                    
                    <!-- 榜单列表 -->
                    <div id="trending-lists" class="trending-lists hidden">
                        <!-- 涨幅榜 -->
                        <div class="trending-section">
                            <h3 class="section-title">🚀 涨幅榜</h3>
                            <p class="section-desc">按当日涨跌幅排序，反映市场热点和资金偏好</p>
                            <div class="stock-list" id="gainers-list"></div>
                        </div>
                        
                        <!-- 市值榜 -->
                        <div class="trending-section">
                            <h3 class="section-title">💰 市值榜</h3>
                            <p class="section-desc">按市值排序，展示市场巨头和蓝筹股</p>
                            <div class="stock-list" id="market-cap-list"></div>
                        </div>
                        
                        <!-- 创新高榜 -->
                        <div class="trending-section">
                            <h3 class="section-title">⬆️ 创年内新高</h3>
                            <p class="section-desc">突破52周最高价的股票，显示强劲上升趋势</p>
                            <div class="stock-list" id="new-highs-list"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- 底部导航栏 -->
        <nav class="mobile-bottom-nav">
            <button class="nav-item active" data-page="trending-mobile">
                <span class="nav-icon">📈</span>
                <span class="nav-label">榜单</span>
            </button>
            <button class="nav-item" data-page="heatmap-mobile">
                <span class="nav-icon">🔥</span>
                <span class="nav-label">热力图</span>
            </button>
            <button class="nav-item" data-page="tag-plaza-mobile">
                <span class="nav-icon">🏷️</span>
                <span class="nav-label">标签</span>
            </button>
        </nav>
    </div>

</body>
</html>