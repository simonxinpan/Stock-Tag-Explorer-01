<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Tag Explorer - æ™ºèƒ½æ ‡ç­¾æµè§ˆå™¨</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* æ ¹å˜é‡å®šä¹‰ */
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --background-color: #f8fafc;
            --surface-color: #ffffff;
            --border-color: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
        }

        /* åŸºç¡€æ ·å¼ */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* å·¥å…·ç±» */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        /* å¤´éƒ¨æ ·å¼ */
        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #3b82f6 100%);
            color: white;
            padding: 2rem 0;
            box-shadow: var(--shadow-md);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-left {
            flex: 1;
        }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .header-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 1rem;
        }

        .nav-links {
            display: flex;
            gap: 1rem;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .nav-link:hover {
            color: white;
            background-color: rgba(255, 255, 255, 0.1);
        }

        .nav-link.active {
            color: white;
            background-color: rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }

        /* å®æ—¶æ—¶é—´æ˜¾ç¤º */
        .time-display {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .local-time {
            margin-bottom: 0.25rem;
        }

        .et-time {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* ä¸»å†…å®¹åŒº */
        .main {
            padding: 2rem 0;
            min-height: calc(100vh - 200px);
        }

        /* æ ‡ç­¾å¹¿åœº */
        .tag-plaza {
            margin-bottom: 2rem;
        }

        .tag-plaza h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        /* åŠ è½½å’Œé”™è¯¯çŠ¶æ€ */
        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .error {
            text-align: center;
            padding: 2rem;
            color: var(--danger-color);
            background-color: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: var(--radius-md);
            margin: 1rem 0;
        }

        /* æ ‡ç­¾ç»„ */
        .tag-groups {
            display: grid;
            gap: 2rem;
        }

        .tag-group {
            background: var(--surface-color);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .tag-group:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .tag-group h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tag-group.performance h3::before {
            content: 'ğŸ“ˆ';
        }

        .tag-group.financial h3::before {
            content: 'ğŸ’°';
        }

        .tag-group.trend h3::before {
            content: 'ğŸ”¥';
        }

        .tag-group.industry h3::before {
            content: 'ğŸ­';
        }

        .tag-group.special h3::before {
            content: 'â­';
        }

        .tag-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .tag-card {
            background: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }

        .tag-card:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .tag-card h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .tag-card p {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }

        .tag-card .stock-count {
            font-size: 0.8rem;
            font-weight: 500;
            opacity: 0.7;
        }

        /* è‚¡ç¥¨åˆ—è¡¨ */
        .stock-list-section {
            margin-top: 2rem;
        }

        .stock-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .stock-list-header h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .stock-list-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .sort-select {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--surface-color);
            color: var(--text-primary);
            font-size: 0.9rem;
            cursor: pointer;
        }

        .clear-btn {
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .clear-btn:hover {
            background: #dc2626;
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .stock-list {
            display: grid;
            gap: 1rem;
        }

        .stock-item {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .stock-info {
            flex: 1;
        }

        .stock-symbol {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .stock-name {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }

        .stock-metrics {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .stock-price {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .stock-change {
            font-weight: 500;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
        }

        .stock-change.positive {
            background: #dcfce7;
            color: var(--success-color);
        }

        .stock-change.negative {
            background: #fef2f2;
            color: var(--danger-color);
        }

        .stock-change.neutral {
            background: var(--background-color);
            color: var(--text-secondary);
        }

        /* åˆ†é¡µ */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .pagination button {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination button:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pagination button.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* é¡µè„š */
        .footer {
            background: var(--surface-color);
            border-top: 1px solid var(--border-color);
            padding: 1.5rem 0;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Toast é€šçŸ¥ */
        .toast {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--surface-color);
            color: var(--text-primary);
            padding: 1rem 1.5rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            z-index: 1001;
            transition: all 0.3s ease;
        }

        .toast.success {
            background: var(--success-color);
            color: white;
        }

        .toast.error {
            background: var(--danger-color);
            color: white;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .header-right {
                align-items: center;
            }
            
            .stock-list-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .stock-list-controls {
                justify-content: center;
            }
            
            .stock-item {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }
            
            .stock-metrics {
                justify-content: space-between;
            }
            
            .tag-cards {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .nav-links {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .tag-cards {
                grid-template-columns: 1fr;
            }
            
            .stock-metrics {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .loading {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="header-left">
                        <h1 class="logo">ğŸ“Š Stock Tag Explorer</h1>
                        <p class="subtitle">æ™ºèƒ½æ ‡ç­¾æµè§ˆå™¨ - å‘ç°æŠ•èµ„æœºä¼š</p>
                    </div>
                    <div class="header-right">
                        <nav class="nav-links">
                            <a href="#" class="nav-link active">æ ‡ç­¾å¹¿åœº</a>
                            <a href="https://stock-tag-explorer-01-i7tdnaego-simon-pans-projects.vercel.app/trending.html" class="nav-link" target="_blank">è¶‹åŠ¿æ¦œå•</a>
                        </nav>
                        <div class="time-display">
                            <div class="local-time" id="local-time">--</div>
                            <div class="et-time" id="et-time">ç¾ä¸œæ—¶é—´: --</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main">
            <div class="container">
                <!-- æ ‡ç­¾å¹¿åœº -->
                <section id="tag-plaza" class="tag-plaza">
                    <h2>æ ‡ç­¾å¹¿åœº</h2>
                    <div id="loading" class="loading">åŠ è½½ä¸­...</div>
                    <div id="error" class="error hidden">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•</div>
                    <div id="tag-groups" class="tag-groups hidden"></div>
                </section>
                
                <!-- è‚¡ç¥¨åˆ—è¡¨ -->
                <section id="stock-list-section" class="stock-list-section hidden">
                    <div class="stock-list-header">
                        <h3 id="stock-list-title">é€‰ä¸­æ ‡ç­¾çš„è‚¡ç¥¨</h3>
                        <div class="stock-list-controls">
                            <select id="sort-select" class="sort-select">
                                <option value="name-asc">æŒ‰åç§°æ’åº â†‘</option>
                                <option value="name-desc">æŒ‰åç§°æ’åº â†“</option>
                                <option value="price-desc">æŒ‰ä»·æ ¼æ’åº â†“</option>
                                <option value="price-asc">æŒ‰ä»·æ ¼æ’åº â†‘</option>
                                <option value="change-desc">æŒ‰æ¶¨è·Œå¹…æ’åº â†“</option>
                                <option value="change-asc">æŒ‰æ¶¨è·Œå¹…æ’åº â†‘</option>
                                <option value="volume-desc">æŒ‰æˆäº¤é‡æ’åº â†“</option>
                                <option value="volume-asc">æŒ‰æˆäº¤é‡æ’åº â†‘</option>
                            </select>
                            <button id="clear-selection" class="clear-btn">æ¸…é™¤é€‰æ‹©</button>
                        </div>
                    </div>
                    <div id="stock-list" class="stock-list"></div>
                    <div id="pagination" class="pagination hidden"></div>
                </section>
            </div>
        </main>
        
        <!-- é¡µè„š -->
        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 Stock Tag Explorer. æ•°æ®æ¥æº: Polygon.io & Finnhub | æ›´æ–°æ—¶é—´: <span id="last-update">--</span></p>
            </div>
        </footer>
        
        <!-- Toast é€šçŸ¥ -->
        <div id="toast" class="toast hidden"></div>
    </div>
    
    <script>
        // å®æ—¶æ—¶é—´æ˜¾ç¤ºåŠŸèƒ½
        function updateTime() {
            const now = new Date();
            
            // æœ¬åœ°æ—¶é—´
            const localTime = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            
            // ç¾ä¸œæ—¶é—´
            const etTime = now.toLocaleString('en-US', {
                timeZone: 'America/New_York',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            
            document.getElementById('local-time').textContent = localTime;
            document.getElementById('et-time').textContent = `ç¾ä¸œæ—¶é—´: ${etTime}`;
            document.getElementById('last-update').textContent = localTime;
        }
        
        // æ¯ç§’æ›´æ–°æ—¶é—´
        setInterval(updateTime, 1000);
        updateTime(); // ç«‹å³æ‰§è¡Œä¸€æ¬¡
        
        // æ ‡ç­¾å¹¿åœºåº”ç”¨ç±»
        class TagExplorerApp {
            constructor() {
                this.selectedTags = new Set();
                this.currentPage = 1;
                this.pageSize = 20;
                this.currentSort = 'name-asc';
                this.allStocks = [];
                this.filteredStocks = [];
                
                this.init();
            }
            
            init() {
                this.bindEvents();
                this.loadTagGroups();
            }
            
            bindEvents() {
                // æ’åºé€‰æ‹©
                document.getElementById('sort-select').addEventListener('change', (e) => {
                    this.currentSort = e.target.value;
                    this.sortAndDisplayStocks();
                });
                
                // æ¸…é™¤é€‰æ‹©
                document.getElementById('clear-selection').addEventListener('click', () => {
                    this.clearSelection();
                });
                
                // æ ‡ç­¾å¡ç‰‡ç‚¹å‡»
                document.addEventListener('click', (e) => {
                    if (e.target.closest('.tag-card')) {
                        const tagCard = e.target.closest('.tag-card');
                        const tagId = tagCard.dataset.tagId;
                        this.toggleTag(tagId, tagCard);
                    }
                });
            }
            
            async loadTagGroups() {
                try {
                    // æ¨¡æ‹ŸAPIè°ƒç”¨ - å®é™…åº”è¯¥è°ƒç”¨åç«¯API
                    const tagGroups = this.generateMockTagGroups();
                    this.renderTagGroups(tagGroups);
                    this.hideLoading();
                } catch (error) {
                    this.showError('åŠ è½½æ ‡ç­¾å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•');
                    console.error('Failed to load tag groups:', error);
                }
            }
            
            generateMockTagGroups() {
                return [
                    {
                        id: 'performance',
                        name: 'è‚¡å¸‚è¡¨ç°',
                        type: 'performance',
                        tags: [
                            { id: 'high_growth', name: 'é«˜å¢é•¿', description: 'è¥æ”¶å¢é•¿è¶…è¿‡20%', stockCount: 156 },
                            { id: 'dividend_kings', name: 'è‚¡æ¯ä¹‹ç‹', description: 'è¿ç»­25å¹´åˆ†çº¢', stockCount: 89 },
                            { id: 'momentum', name: 'åŠ¨é‡è‚¡', description: 'è¿‘æœŸè¡¨ç°å¼ºåŠ²', stockCount: 234 },
                            { id: 'value_stocks', name: 'ä»·å€¼è‚¡', description: 'ä½ä¼°å€¼é«˜è´¨é‡', stockCount: 178 }
                        ]
                    },
                    {
                        id: 'financial',
                        name: 'è´¢åŠ¡æŒ‡æ ‡',
                        type: 'financial',
                        tags: [
                            { id: 'low_pe', name: 'ä½å¸‚ç›ˆç‡', description: 'P/Eæ¯”ç‡ä½äº15', stockCount: 145 },
                            { id: 'high_roe', name: 'é«˜ROE', description: 'å‡€èµ„äº§æ”¶ç›Šç‡>15%', stockCount: 123 },
                            { id: 'low_debt', name: 'ä½è´Ÿå€º', description: 'è´Ÿå€ºç‡ä½äº30%', stockCount: 167 },
                            { id: 'cash_rich', name: 'ç°é‡‘å……è£•', description: 'ç°é‡‘æµå……è¶³', stockCount: 198 }
                        ]
                    },
                    {
                        id: 'trend',
                        name: 'å¸‚åœºè¶‹åŠ¿',
                        type: 'trend',
                        tags: [
                            { id: 'ai_revolution', name: 'AIé©å‘½', description: 'äººå·¥æ™ºèƒ½ç›¸å…³', stockCount: 87 },
                            { id: 'green_energy', name: 'ç»¿è‰²èƒ½æº', description: 'æ¸…æ´èƒ½æºæ¦‚å¿µ', stockCount: 134 },
                            { id: 'cloud_computing', name: 'äº‘è®¡ç®—', description: 'äº‘æœåŠ¡æä¾›å•†', stockCount: 76 },
                            { id: 'biotech', name: 'ç”Ÿç‰©ç§‘æŠ€', description: 'ç”Ÿç‰©æŠ€æœ¯åˆ›æ–°', stockCount: 112 }
                        ]
                    },
                    {
                        id: 'industry',
                        name: 'è¡Œä¸šåˆ†ç±»',
                        type: 'industry',
                        tags: [
                            { id: 'tech_giants', name: 'ç§‘æŠ€å·¨å¤´', description: 'å¤§å‹ç§‘æŠ€å…¬å¸', stockCount: 45 },
                            { id: 'healthcare', name: 'åŒ»ç–—ä¿å¥', description: 'åŒ»ç–—å¥åº·è¡Œä¸š', stockCount: 189 },
                            { id: 'financial_services', name: 'é‡‘èæœåŠ¡', description: 'é“¶è¡Œä¿é™©è¯åˆ¸', stockCount: 156 },
                            { id: 'consumer_goods', name: 'æ¶ˆè´¹å“', description: 'æ—¥ç”¨æ¶ˆè´¹å“', stockCount: 234 }
                        ]
                    },
                    {
                        id: 'special',
                        name: 'ç‰¹è‰²æ ‡ç­¾',
                        type: 'special',
                        tags: [
                            { id: 'esg_leaders', name: 'ESGé¢†å¯¼è€…', description: 'ç¯å¢ƒç¤¾ä¼šæ²»ç†ä¼˜ç§€', stockCount: 98 },
                            { id: 'insider_buying', name: 'å†…éƒ¨äººå¢æŒ', description: 'ç®¡ç†å±‚å¢æŒè‚¡ç¥¨', stockCount: 67 },
                            { id: 'analyst_upgrades', name: 'åˆ†æå¸ˆä¸Šè°ƒ', description: 'è¿‘æœŸè¢«ä¸Šè°ƒè¯„çº§', stockCount: 89 },
                            { id: 'earnings_beat', name: 'ä¸šç»©è¶…é¢„æœŸ', description: 'è´¢æŠ¥è¶…å‡ºé¢„æœŸ', stockCount: 123 }
                        ]
                    }
                ];
            }
            
            renderTagGroups(tagGroups) {
                const container = document.getElementById('tag-groups');
                container.innerHTML = tagGroups.map(group => `
                    <div class="tag-group ${group.type}">
                        <h3>${group.name}</h3>
                        <div class="tag-cards">
                            ${group.tags.map(tag => `
                                <div class="tag-card" data-tag-id="${tag.id}">
                                    <h4>${tag.name}</h4>
                                    <p>${tag.description}</p>
                                    <div class="stock-count">${tag.stockCount} åªè‚¡ç¥¨</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `).join('');
                
                container.classList.remove('hidden');
            }
            
            async toggleTag(tagId, tagCard) {
                if (this.selectedTags.has(tagId)) {
                    this.selectedTags.delete(tagId);
                    tagCard.style.background = '';
                    tagCard.style.color = '';
                } else {
                    this.selectedTags.add(tagId);
                    tagCard.style.background = 'var(--primary-color)';
                    tagCard.style.color = 'white';
                }
                
                if (this.selectedTags.size > 0) {
                    await this.loadStocksByTags();
                } else {
                    this.hideStockList();
                }
            }
            
            async loadStocksByTags() {
                try {
                    this.showStockListLoading();
                    
                    // æ¨¡æ‹ŸAPIè°ƒç”¨ - å®é™…åº”è¯¥è°ƒç”¨åç«¯API
                    const stocks = this.generateMockStocks();
                    this.allStocks = stocks;
                    this.filteredStocks = stocks;
                    
                    this.updateStockListTitle();
                    this.sortAndDisplayStocks();
                    this.showStockList();
                } catch (error) {
                    this.showToast('åŠ è½½è‚¡ç¥¨æ•°æ®å¤±è´¥', 'error');
                    console.error('Failed to load stocks:', error);
                }
            }
            
            generateMockStocks() {
                const mockStocks = [
                    { symbol: 'AAPL', name: 'è‹¹æœå…¬å¸', price: 175.43, change: 5.67, changePercent: 3.34, volume: '45.2M' },
                    { symbol: 'MSFT', name: 'å¾®è½¯å…¬å¸', price: 378.85, change: -2.15, changePercent: -0.56, volume: '28.1M' },
                    { symbol: 'GOOGL', name: 'è°·æ­Œæ¯å…¬å¸', price: 138.21, change: 8.92, changePercent: 6.90, volume: '32.5M' },
                    { symbol: 'AMZN', name: 'äºšé©¬é€Šå…¬å¸', price: 151.94, change: 4.23, changePercent: 2.86, volume: '41.8M' },
                    { symbol: 'TSLA', name: 'ç‰¹æ–¯æ‹‰å…¬å¸', price: 248.50, change: -12.30, changePercent: -4.72, volume: '67.3M' },
                    { symbol: 'META', name: 'Metaå¹³å°', price: 484.20, change: 15.67, changePercent: 3.35, volume: '19.4M' },
                    { symbol: 'NVDA', name: 'è‹±ä¼Ÿè¾¾å…¬å¸', price: 875.28, change: 45.82, changePercent: 5.52, volume: '52.1M' },
                    { symbol: 'NFLX', name: 'å¥ˆé£å…¬å¸', price: 445.03, change: -8.97, changePercent: -1.98, volume: '15.7M' },
                    { symbol: 'JPM', name: 'æ‘©æ ¹å¤§é€š', price: 168.45, change: 3.21, changePercent: 1.94, volume: '22.3M' },
                    { symbol: 'JNJ', name: 'å¼ºç”Ÿå…¬å¸', price: 159.87, change: -1.45, changePercent: -0.90, volume: '18.9M' }
                ];
                
                return mockStocks;
            }
            
            sortAndDisplayStocks() {
                const [field, direction] = this.currentSort.split('-');
                
                this.filteredStocks.sort((a, b) => {
                    let aVal, bVal;
                    
                    switch (field) {
                        case 'name':
                            aVal = a.name;
                            bVal = b.name;
                            break;
                        case 'price':
                            aVal = a.price;
                            bVal = b.price;
                            break;
                        case 'change':
                            aVal = a.changePercent;
                            bVal = b.changePercent;
                            break;
                        case 'volume':
                            aVal = parseFloat(a.volume.replace('M', ''));
                            bVal = parseFloat(b.volume.replace('M', ''));
                            break;
                        default:
                            aVal = a.symbol;
                            bVal = b.symbol;
                    }
                    
                    if (direction === 'asc') {
                        return aVal > bVal ? 1 : -1;
                    } else {
                        return aVal < bVal ? 1 : -1;
                    }
                });
                
                this.renderStockList();
            }
            
            renderStockList() {
                const container = document.getElementById('stock-list');
                const startIndex = (this.currentPage - 1) * this.pageSize;
                const endIndex = startIndex + this.pageSize;
                const pageStocks = this.filteredStocks.slice(startIndex, endIndex);
                
                container.innerHTML = pageStocks.map(stock => {
                    const changeClass = stock.change > 0 ? 'positive' : stock.change < 0 ? 'negative' : 'neutral';
                    const changeSymbol = stock.change > 0 ? '+' : '';
                    
                    return `
                        <div class="stock-item">
                            <div class="stock-info">
                                <div class="stock-symbol">${stock.symbol}</div>
                                <div class="stock-name">${stock.name}</div>
                            </div>
                            <div class="stock-metrics">
                                <div class="stock-price">$${stock.price.toFixed(2)}</div>
                                <div class="stock-change ${changeClass}">
                                    ${changeSymbol}${stock.changePercent.toFixed(2)}%
                                </div>
                                <div class="stock-volume">${stock.volume}</div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                this.renderPagination();
            }
            
            renderPagination() {
                const totalPages = Math.ceil(this.filteredStocks.length / this.pageSize);
                if (totalPages <= 1) {
                    document.getElementById('pagination').classList.add('hidden');
                    return;
                }
                
                const container = document.getElementById('pagination');
                let paginationHTML = '';
                
                // ä¸Šä¸€é¡µ
                paginationHTML += `<button ${this.currentPage === 1 ? 'disabled' : ''} onclick="app.goToPage(${this.currentPage - 1})">ä¸Šä¸€é¡µ</button>`;
                
                // é¡µç 
                for (let i = 1; i <= totalPages; i++) {
                    if (i === this.currentPage) {
                        paginationHTML += `<button class="active">${i}</button>`;
                    } else {
                        paginationHTML += `<button onclick="app.goToPage(${i})">${i}</button>`;
                    }
                }
                
                // ä¸‹ä¸€é¡µ
                paginationHTML += `<button ${this.currentPage === totalPages ? 'disabled' : ''} onclick="app.goToPage(${this.currentPage + 1})">ä¸‹ä¸€é¡µ</button>`;
                
                container.innerHTML = paginationHTML;
                container.classList.remove('hidden');
            }
            
            goToPage(page) {
                const totalPages = Math.ceil(this.filteredStocks.length / this.pageSize);
                if (page < 1 || page > totalPages) return;
                
                this.currentPage = page;
                this.renderStockList();
            }
            
            updateStockListTitle() {
                const tagNames = Array.from(this.selectedTags).join(', ');
                document.getElementById('stock-list-title').textContent = `é€‰ä¸­æ ‡ç­¾çš„è‚¡ç¥¨ (${tagNames})`;
            }
            
            clearSelection() {
                this.selectedTags.clear();
                document.querySelectorAll('.tag-card').forEach(card => {
                    card.style.background = '';
                    card.style.color = '';
                });
                this.hideStockList();
            }
            
            showStockList() {
                document.getElementById('stock-list-section').classList.remove('hidden');
            }
            
            hideStockList() {
                document.getElementById('stock-list-section').classList.add('hidden');
            }
            
            showStockListLoading() {
                document.getElementById('stock-list').innerHTML = '<div class="loading">åŠ è½½è‚¡ç¥¨æ•°æ®ä¸­...</div>';
                this.showStockList();
            }
            
            hideLoading() {
                document.getElementById('loading').classList.add('hidden');
            }
            
            showError(message) {
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('error').classList.remove('hidden');
                document.getElementById('error').textContent = message;
            }
            
            showToast(message, type = 'info') {
                const toast = document.getElementById('toast');
                toast.textContent = message;
                toast.className = `toast ${type}`;
                toast.classList.remove('hidden');
                
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 3000);
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–åº”ç”¨
        let app;
        document.addEventListener('DOMContentLoaded', () => {
            app = new TagExplorerApp();
        });
    </script>
</body>
</html>

